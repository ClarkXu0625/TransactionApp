<h1> Transaction for <%= user.username %></h1>
<a>Here's a list of your recent transactions</a>

<div>
  <button onclick="window.location.href='/transaction/byCategory'">Group by Category</button>
  <button onclick="window.location.href='/transaction?sortBy=description'">Sort by Description</button>
  <button onclick="window.location.href='/transaction?sortBy=amount'">Sort by Amount</button>
  <button onclick="window.location.href='/transaction?sortBy=date'">Sort by Date</button>
  <button onclick="window.location.href='/transaction?sortBy=category'">Sort by Category</button>
</div>


<table class="table">
    <thead>
      <tr>
        <th>description</th>
        <th>amount</th>
        <th>category </th>
        <th>date</th>
      </tr>
    </thead>
    <tbody>
      <% transactions.forEach(transaction => { %>
      <tr>
        <td><%= transaction.description %></a></td>
        <td><%= transaction.amount %></td>
        <td><%= transaction.category %></td>
        <td><%= transaction.date.toISOString().split('T')[0] %></td>



        <!-- Edit transaction-->
        <td>
          <a href="<%=`/transaction/edit/${transaction._id}` %>"> Edit </a>
        </td>

        <!-- Delete transaction -->
        <td>
            <form action="/transaction/remove/<%= transaction._id %>" method="post" style="display:inline;">
                <input type="submit" value="Delete" onclick="return confirm('Are you sure you want to delete this transaction?');">
            </form>
          <!--<a
            href="<%= `transaction/${transaction._id}/delete?_method=DELETE` %>"
            onclick="return confirm('Are you sure you want to delete this event?')"
          >Delete</a> -->
        </td>
      <% }); %>
      </tr>
    </tbody>
</table>


<br><h1> Add a New Transaction</h1>


<div>
    <form action="/transaction" method="POST">
        <label for="description"><br>Description:</label>
        <input type="text" name="description"><br>

        <label for="amount"><br>Amount:</label>
        <input type="number" name="amount" required><br>

        <label for="category"><br>Category:</label>
        <input type="text" name="category" required><br>

        <label for="date"><br>Date:</label>
        <input type="datetime-local" name="date" required><br>

        <br><button type="submit">add transaction</button>

    </form>
</div>